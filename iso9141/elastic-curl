{
    "from": 0,
        "size": 5,
        "sort": [
        {
            "post_meta.salon_priority": {
                "order": "asc"
            }
        },
        {
            "post_date": {
                "order": "desc"
            }
        }
    ],
        "query": {
            "match_all": []
        },
        "filter": {
            "and": [
            {
                "bool": {
                    "must": [
                    {
                        "terms": {
                            "terms.category.slug": [
                                "all_salon"
                                ]
                        }
                    }
                    ]
                }
            },
            {
                "bool": {
                    "must": {
                        "terms": {
                            "terms.category.slug": [
                                "all_salon"
                                ]
                        }
                    }
                }
            },
            {
                "bool": {
                    "must": [
                    {
                        "terms": {
                            "post_meta.salon_priority.raw": [
                                "1",
                            "2",
                            "3",
                            "4",
                            "5"
                                ]
                        }
                    },
                    {
                        "exists": {
                            "field": "post_meta._coverline"
                        }
                    },
                    {
                        "exists": {
                            "field": "post_meta._thumbnail_id"
                        }
                    }
                    ]
                }
            },
            {
                "term": {
                    "post_type.raw": [
                        "post"
                        ]
                }
            },
            {
                "term": {
                    "post_status": [
                        "publish"
                        ]
                }
            },
            {
                "bool": {
                    "must": [
                    {
                        "exists": {
                            "field": "post_excerpt"
                        }
                    }
                    ]
                }
            },
            {
                "bool": {
                    "must": [
                    {
                        "script": {
                            "script": "(doc['post_date'].value + doc['post_meta.salon_shelf_life'].value) > currtime ? true : false",
                            "params": {
                                "currtime": 1437028959
                            }
                        }
                    }
                    ]
                }
            }
            ]
        }
}
